Script started on Tue 31 Mar 2020 02:18:15 PM CDT
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ exitjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
1
Option 1: Find all agents and clients in a given city.
What city would you like to search? atlam nta
We will search for agents and clients in atlanta.
Clients in atlanta:
Agents in atlanta:
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
landon
Enter client's city
atlanta
Enter clientâ€™s zip
3126
What type of policy would you like to purchase?
life
There is not an agent in client's city
Client could not be added to the db
5
Option 5: add a new agent for a city.
What city are you adding an agent for? 
atlamn  nta
What is the agent's id (A_ID starts with 2)? 207
What is the agent's name (A_NAME)? samantha
What is the agent's city (A_CITY)? atlanta
What is the agent's zip (A_ZIP)? 3126
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '207' for key 'PRIMARY'
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:935)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.StatementImpl.executeUpdateInternal(StatementImpl.java:1540)
	at com.mysql.jdbc.StatementImpl.executeLargeUpdate(StatementImpl.java:2595)
	at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1468)
	at HW4.addAgent(HW4.java:211)
	at HW4.menu(HW4.java:252)
	at HW4.main(HW4.java:20)
5
Option 5: add a new agent for a city.
What city are you adding an agent for? 
ATLAM NTA
What is the agent's id (A_ID starts with 2)? 221
What is the agent's name (A_NAME)? SAMANTHA
What is the agent's city (A_CITY)? ATLANTA
What is the agent's zip (A_ZIP)? 3126
Updated Agents table:
201,  ANDREW,  DALLAS,  43214
202,  PHILIP,  PHOENIX,  85011
203,  JERRY,  BOSTON,  83125
204,  BRYAN,  ROGERS,  78291
205,  TOMMY,  DALLAS,  43214
206,  BRANT,  FAYETTEVILLE,  72701
207,  SMITH,  ROGERS,  78291
221,  SAMANTHA,  ATLANTA,  3126
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
LANDON
Enter client's city
ATLANTA
Enter clientâ€™s zip
3126
What type of policy would you like to purchase?
CAR
Policy type not found
Client could not be added to the db
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
LANDON
Enter client's city
ATLANTA
Enter clientâ€™s zip
3126
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in ATLANTA
221,  SAMANTHA,  ATLANTA,  3126
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
220
That agent ID is not an option
Client could not be added to the db
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
LANDON
Enter client's city
ATLANTA
Enter clientâ€™s zip
32 126
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in ATLANTA
221,  SAMANTHA,  ATLANTA,  3126
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
221
Provide the policy id you want to purchase
30 20
That policy ID is not an option
Client could not be added to the db
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
LANDON
Enter client's city
ATLANTA
Enter clientâ€™s zip
3126
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in ATLANTA
221,  SAMANTHA,  ATLANTA,  3126
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
221
Provide the policy id you want to purchase
302
Please provide the amount of the policy
4500
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`cggschwe`.`POLICIES_SOLD`, CONSTRAINT `POLICIES_SOLD_ibfk_2` FOREIGN KEY (`CLIENT_ID`) REFERENCES `CLIENTS` (`C_ID`))
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:935)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.StatementImpl.executeUpdateInternal(StatementImpl.java:1540)
	at com.mysql.jdbc.StatementImpl.executeLargeUpdate(StatementImpl.java:2595)
	at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1468)
	at HW4.purchase(HW4.java:121)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:246)
	at HW4.main(HW4.java:20)
We will add LANDON to our database as a client
1
Option 1: Find all agents and clients in a given city.
What city would you like to search? ATLANTA
We will search for agents and clients in ATLANTA.
Clients in ATLANTA:
107,  LANDON,  ATLANTA,  3126
Agents in ATLANTA:
221,  SAMANTHA,  ATLANTA,  3126
3 4
Option 4: cancel a policy.
Policies sold:
401,  204,  106,  303,  2020-01-02,  2000.00
402,  201,  105,  305,  2019-08-11,  1500.00
403,  203,  106,  301,  2019-09-08,  3000.00
404,  207,  101,  305,  2019-06-21,  1500.00
405,  203,  104,  302,  2019-11-14,  4500.00
407,  205,  103,  304,  2020-10-15,  5000.00
408,  204,  103,  304,  2020-02-15,  5000.00
410,  202,  103,  303,  2020-01-30,  2000.00
Enter the PURCHASE_ID of the policy to cancel: 
6
Updated POLICIES_SOLD table
401,  204,  106,  303,  2020-01-02,  2000.00
402,  201,  105,  305,  2019-08-11,  1500.00
403,  203,  106,  301,  2019-09-08,  3000.00
404,  207,  101,  305,  2019-06-21,  1500.00
405,  203,  104,  302,  2019-11-14,  4500.00
407,  205,  103,  304,  2020-10-15,  5000.00
408,  204,  103,  304,  2020-02-15,  5000.00
410,  202,  103,  303,  2020-01-30,  2000.00
EXIT
That is not an accepted option, plese refere to the menu
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ EXIT
EXIT: command not found
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ :ANO [K[K[K[K[Knano HW4.java
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 306 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[2;44r[44;1H[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m";"[39m(B[m);[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23d[24d[25d[26d[27d[A[A[A[A[A[A[A[20;9H[20;17H[20;25H[20;33H[20;41H[C[C[C[C[C[C[C[C[21d[A[A[A[19d statement.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1;146H(B[0;7mModified[19;95H(B[0m[31mnWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;96H[31maWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;97H[31mtWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;98H[31muWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;99H[31mrWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;100H[31maWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;101H[31mlWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;102H[1P[1P[1P[1P[1P[1P[1P[31mNWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;96H[31mAWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;97H[31mTWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;98H[31mUWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;99H[31mRWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;100H[31mAWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;101H[31mLWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;102H[31m WHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;103H[31mJWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;104H[31mOWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;105H[31mIWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;106H[31mNWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;107H[31m WHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;108H[31mpWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;109H[31mOWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;110H[31mLWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;111H[31mIWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;112H[31mCWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;113H[31mYWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;114H[1P[1P[1P[1P[1P[1P[31mPWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;109H[31mOWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;110H[31mLWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;111H[31mIWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;112H[31mCWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;113H[31mYWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;114H[31m WHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;115H[C[C[C[C[C[C[C[C[C[C[C[C + aID  + [C[31mA;"[39m(B[m);[31mN;"[39m(B[m);[31mD;"[39m(B[m);[31m ;"[39m(B[m);[31m;"[39m(B[m);[K[31m ;"[39m(B[m);[31mC;"[39m(B[m);[31mI;"[39m(B[m);[31mT;"[39m(B[m);[31mY;"[39m(B[m);[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31ma;"[39m(B[m);[31m;"[39m(B[m);[K[31mA;"[39m(B[m);[31m_;"[39m(B[m);[31mC;"[39m(B[m);[31mI;"[39m(B[m);[31mT;"[39m(B[m);[31mY;"[39m(B[m);[31m ;"[39m(B[m);[31m=;"[39m(B[m);[31m ;"[39m(B[m);[31m;"[39m(B[m);[K[31m"[39m(B[m;");[31m'"[39m(B[m;");[19;151H[C+;"$[19;153H ;$[31m='"[39m(B[m+ C;");[KI;");T;");Y;");;");[K;");[K;");[K[19;40H[1K result = statement.executeQuery([31m"SELECT * FROM AGENTS NATURAL JOIN POLICY WHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ ;$[19;154H$[31m='"[39m(B[m+ c;");[Ki;");t;");y;"); ;");+;"); ;");[31m";"[39m(B[m);[19;40H[1K result = statement.executeQuery([31m"SELECT * FROM AGENTS NATURAL JOIN POLICY WHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ c$[19;154H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ ci[19;114H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ cit[19;113H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city[19;112H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city [19;111H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city +[19;110H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [19;109H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m"[19;108H[39m(B[m[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m";[19;107H[39m(B[m[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m";"[19;106H[39m(B[m[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[19;105H[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[20;63H[21;59H[22;95H[23d[24d[25;95H[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + pID + [C[31m ;"[39m(B[m);[31ma;"[39m(B[m);[31mn;"[39m(B[m);[31md;"[39m(B[m);[31m ;"[39m(B[m);[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31mA;"[39m(B[m);[31mN;"[39m(B[m);[31mD;"[39m(B[m);[31m ;"[39m(B[m);[31mT;"[39m(B[m);[31mY;"[39m(B[m);[31mP;"[39m(B[m);[31mE;"[39m(B[m);[31m ;"[39m(B[m);[31m=;"[39m(B[m);[31m ;"[39m(B[m);[31m;"[39m(B[m);[K[31m';"[39m(B[m);[31m"[39m(B[m;");+;");[31m";"[39m(B[m);P[31m";"[39m(B[m);[146Gt[31m";"[39m(B[m);[147GY[31m";"[39m(B[m);[148GP[31m";"[39m(B[m);[149GE[31m";"[39m(B[m);[150G[31m";"[39m(B[m);[K[149G[31m";"[39m(B[m);[K[148G[31m";"[39m(B[m);[K[147G[31m";"[39m(B[m);[K[146G[31m";"[39m(B[m);[K[145Gp[31m";"[39m(B[m);[146GT[31m";"[39m(B[m);[147Gy[31m";"[39m(B[m);[148Gp[31m";"[39m(B[m);[149Ge[31m";"[39m(B[m);[150G [31m";"[39m(B[m);[25;151H+[31m";"[39m(B[m$[25;152H [31m";[39m(B[m[26;72H[27;73H[28;91H[29;119H[30;109H[31;73H[32;102H[33;105H[34;136H[35;72H[36;93H[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 306 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[36;93H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javaEXIT[Kjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cexit[Kjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cnano HW4.java[K[7Pscriptjavac HW4.java[1Pnano[C[C[C[C[C[C[C[C[C[1@javac[C[C[C[C[C[C[C[C[C
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[CEXIT[Kjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cexit[Kjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian 
Enter client's city
Fayetteville
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
life
Policy type found. Here are the agents in Fayetteville
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
205
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'A_CITY ='Fayetteville' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:101)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:246)
	at HW4.main(HW4.java:20)
We will add Gillian  to our database as a client
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian
Enter client's city
Fayetteville
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
life
Policy type found. Here are the agents in Fayetteville
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
6
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'A_CITY ='Fayetteville' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:101)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:246)
	at HW4.main(HW4.java:20)
We will add Gillian to our database as a client
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ java -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 306 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[40;9H[40;17H[40;25H[40;33H[40;41Hresult = s[41d[C[C[C[C[C[C[C[C[C[C[C[C[42d[42;9H[42;17H[42;25H[42;33H[42;41H[C[C(result.next())[A[A[A[A[A[A[Amen[A[A[A[Amen[A[31d[32;55H[33;58H[34d[35d[36;55H[37;58H[38d[39d[40dt.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + aID  + [C[C[C[C[C[C[C[C[C[C[1;146H(B[0;7mModified[40;121H(B[0m[31m  A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;122H[31mw A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;123H[31mh A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;124H[31me A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;125H[31mr A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;126H[1P[1P[1P[1P[31mW A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;123H[31mH A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;124H[31mE A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;125H[31mR A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;126H[31mE A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;127H[41;63H[42;59H[43;99H7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND TYPE ='"[39m(B[m+pType + [31m";[39m(B[m$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23;114H[24;93H[25;127H[26;72H[27;73H[28;91H[27;73H[A[25;127H[24;93H[25d[25;9H[25;17H[25;25H[25;33H[25;41H[25;49Hresult = statement.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + pID + [C[C[C[C[C[C[31mWTYPE ='"[39m(B[m+pType + [31m"[25;137H[39m(B[m[31mHTYPE ='"[39m(B[m+pType + [25;138H[31mETYPE ='"[39m(B[m+pType +[25;139H[31mRTYPE ='"[39m(B[m+pType [25;140H[31mETYPE ='"[39m(B[m+pType[25;141H[31m TYPE ='"[39m(B[m+pTyp[25;142H[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 306 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[25;142H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C[1@javac[C[C[C[C[C[C[C[C[C
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cnano HW4.java[K
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 306 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_ID="[39m(B[m + aID  + [31m"AND WHERE A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;41H}[24d[31melse[39m(B[m{[25dSystem.out.println([31m"That agent ID is not an option"[39m(B[m);[26;46H[31mreturn[39m(B[m 1;[27;41H}[28;33H} [31melse[39m(B[m {[29d[34m//no agent in clients city[39m[42m [30;41H[49m(B[mSystem.out.println([31m"There is not an agent in client's city"[39m(B[m);[31;41H[31mreturn[39m(B[m 1;[32;33H}[33;25H} [31melse[39m(B[m {[34d[34m//if policy type not found[35;33H[39m(B[mSystem.out.println([31m"Policy type not found"[39m(B[m);[36;33H[31mreturn[39m(B[m 1;[37;25H}[38;8H[42m[1K[39;17H[49m(B[m} [31mcatch[39m(B[m(SQLException e) {[40;25He.printStackTrace();[41;17H}[42d[31mreturn[39m(B[m 2;[43;9H}[42m       [23d[49m(B[m[24d[25d[26d[27d[28d[29d[30d[30;9H[30;17H[30;25H[30;33H[30;41HSyst[31d[32;34H[33d[34;45H[35d[36;42H[37;26H[38;9H[39;42H[40;45H[41d[40;45H[1;146H(B[0;7mModified[41d(B[m[K[42;17H}[K[43d[1K [31mreturn[39m(B[m 2;[41d[8G[42m[1K [49m(B[m[16G[42m[1K [49m(B[m[24G[42m[1K [49m(B[m[1K RETURN     [42m[1K [49m(B[m [1K retur[25G[31mreturn[39m(B[m[42m [49m(B[m 1;[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[41;34H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.java[1@javac[C[C[C[C[C[C[C[C[C
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[C[1@javac[C[C[C[C[C[C[C[C[C[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian
Enter client's city
Fayetteviile
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
life
There is not an agent in client's city
Client could not be added to the db
201
That is not an accepted option, plese refere to the menu
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian
Enter client's city
Fayetteville
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
life
Policy type found. Here are the agents in Fayetteville
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
201
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE A_CITY ='Fayetteville' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:101)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:247)
	at HW4.main(HW4.java:20)
Client could not be added to the db
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ java -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 307 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_ID="[39m(B[m + aID  + [31m"AND WHERE A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[17d[18d[19d[20d[19;152H[20;63H[A[Age[19dnt.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1;146H(B[0;7mModified[19;101H(B[0m[31m(A_ID="[39m(B[m + aID  + [31m"AND WHERE A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[19;102H[C[C[C[C[C[C + aID  + [C[C[C[C[C[C[C[C[C[C[C[1P[1P[1P[1P[1P[1P[C[C[C[C[C[C[C[C[C[C+ city + )[31m";"[39m(B[m);[143G[31m";"[39m(B[m);[K[142G[C[31m);"[39m(B[m);[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[19;144H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian
Enter client's city
Fayetteville
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
life
Policy type found. Here are the agents in Fayetteville
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
201
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'A_CITY ='Fayetteville)' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:101)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:247)
	at HW4.main(HW4.java:20)
Client could not be added to the db
^[[A    6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ java -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 307 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE (A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m");"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[38;9H[39d[40d[41d[42d[43d[43;17H[43;25H[43;33H[43;41H[43;49H[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[42;59H[41;63H[42d[42;9H[42;17H[42;25H[A[A[40;33H[40;41Hresult = statement.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + aID  + [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C+ city + [C[1;146H(B[0;7mModified[40;143H(B[0m[31m');"[39m(B[m);[144G[41;63H[42;59H[43;99H7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23;114H[22;99H[23;114H[24;93H[25;144H[C[C[C[C[C[C[C[C[C[C[C[C+pTy$[31m"[39m(B[m+pType + [31m";"[39m(B[m);[K[8Ge + [C[31m';"[39m(B[m);[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[25;14H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian
Enter client's city
G FAYETTEVILLE
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in FAYETTEVILLE
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
201
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'A_CITY ='FAYETTEVILLE')' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:101)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:247)
	at HW4.main(HW4.java:20)
Client could not be added to the db
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ java -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 307 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE (A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m"');"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[25d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23d[24d[26d[27d[A[A[A[A[A[A[A[A[A[18;9H[18;17H[18;25H[18;33H[18;41H[C[C[C aID = Integer.parseInt(scan.nextLine());[C[19d[19;9H[19;17H[19;25H[19;33H[19;41Hresult[19;33H[19;25H[19;17H[19;9H[18;86H[C[19d[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + aID  + [44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[44;68H[39;49m(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[19;118H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cnano HW4.java[K
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 307 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE (A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m"');"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[38;9H[38;17H[38;25H[38;33H[38;41HSystem[39d[40d = statement.executeQuery([C[C[C[C[C[C[81G[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + aID  + [C[1;146H(B[0;7mModified[40;119H(B[0m[31m AND A_CITY ='"[39m(B[m+ city + [31m"');"[39m(B[m);[40;120H[41;63H[42;59H[43;99H7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23;114H[24;93H[25;120H[26;72H[27;73H[28;91H[29;119H[30;109H[31;73H[32;102H[33;105H[34;120H[35;72H[34;120H[33;105H[A[31;73H[30;109H[29;119H[28;91H[27;73H[A[25;120H[24;93H[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[24;93H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
gillian       GILLIAN
Enter client's city
FAYETTEVILLE
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in FAYETTEVILLE
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
201
That agent ID is not an option
Client could not be added to the db
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
GILLIAN
Enter client's city
FAYETTEVILLE
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in FAYETTEVILLE
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
206
Provide the policy id you want to purchase
301
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE TYPE ='LIFE'' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:107)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:247)
	at HW4.main(HW4.java:20)
Client could not be added to the db
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ java -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 307 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE (A_ID="[39m(B[m + aID  + [31m" AND A_CITY ='"[39m(B[m+ city + [31m"');"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23d[24d[26d[27d[28d[29d[30d[31d[32d[A[A[A[A[A[A[A[A[A[A[22;9H[23d[24d[25d[25;17H[25;25H[25;33H[25;41H[25;49Hresult = statement.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1;146H(B[0;7mModified[25;109H(B[0m[31m(POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTy[25;110H[C[C[C[C[C[C[C[C[C[C[C[C + pID + [C[C[C[C[C[C[C[C[C[C[C[C[31mYPE ='"[39m(B[m+pTyp[25;143H[31mYPE ='"[39m(B[m+pType[25;142H[31mYPE ='"[39m(B[m+pType [25;141H[31mYPE ='"[39m(B[m+pType +[25;140H[31mYPE ='"[39m(B[m+pType + [25;139H[31mYPE ='"[39m(B[m+pType + [31m"[25;138H[39m(B[m[31mYPE ='"[39m(B[m+pType + [31m"'[25;137H[39m(B[m[31mTYPE ='"[39m(B[m+pType + [31m"[25;138H[39m(B[m[C[C[C[C[C[C[C+pType + $pe + [31m"';"[39m(B[m);[K[8G[C[31m);"[39m(B[m);[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[25;10H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
GILLIAN
Enter client's city
FAYETTEVILLE
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in FAYETTEVILLE
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
206
Provide the policy id you want to purchase
301
That policy ID is not an option
Client could not be added to the db
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ SC[K[KGIT [K[K[K[Kgit add .
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ git commit -m"more error handling"
[master e704096] more error handling
 3 files changed, 562 insertions(+), 22 deletions(-)
 rewrite HW4.class (77%)
 create mode 100644 typescript
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ git puhs[K[Ksh
warning: push.default is unset; its implicit value is changing in
Git 2.0 from 'matching' to 'simple'. To squelch this message
and maintain the current behavior after the default changes, use:

  git config --global push.default matching

To squelch this message and adopt the new behavior now, use:

  git config --global push.default simple

When push.default is set to 'matching', git will push local branches
to the remote branches that already exist with the same name.

In Git 2.0, Git will default to the more conservative 'simple'
behavior, which only pushes the current branch to the corresponding
remote branch that 'git pull' uses to update the current branch.

See 'git help config' and search for 'push.default' for further information.
(the 'simple' mode was introduced in Git 1.7.11. Use the similar mode
'current' instead of 'simple' if you sometimes use older versions of Git)

Username for 'https://github.com': grdirkso
Password for 'https://grdirkso@github.com': 
To https://github.com/grdirkso/HW4.git
 ! [rejected]        master -> master (fetch first)
error: failed to push some refs to 'https://github.com/grdirkso/HW4.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ git pull
remote: Enumerating objects: 5, done.[K
remote: Counting objects:  20% (1/5)[Kremote: Counting objects:  40% (2/5)[Kremote: Counting objects:  60% (3/5)[Kremote: Counting objects:  80% (4/5)[Kremote: Counting objects: 100% (5/5)[Kremote: Counting objects: 100% (5/5), done.[K
remote: Compressing objects: 100% (1/1)[Kremote: Compressing objects: 100% (1/1), done.[K
remote: Total 3 (delta 2), reused 3 (delta 2), pack-reused 0[K
Unpacking objects:  33% (1/3)   Unpacking objects:  66% (2/3)   Unpacking objects: 100% (3/3)   Unpacking objects: 100% (3/3), done.
From https://github.com/grdirkso/HW4
   a20f19b..a8ee29d  master     -> origin/master
Auto-merging HW4.java
CONFLICT (content): Merge conflict in HW4.java
Automatic merge failed; fix conflicts and then commit the result.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ git pullshcommit -m"more error handling"[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cadd .[Kjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[25d[34m//Function to implement the 1st option. Finds all agents and clients in a given city.[39m[42m [26;9H[49m[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17H[34m// inputs the city query from the user.[31;17H[39m(B[mString city = scan.nextLine();[32;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[33;17H[31mtry[39m(B[m {[34;25Hstatement = connection.createStatement();[35;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[36;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[37;25H[34m// queries the SQL database for clients in the inputted city.[38;25H[39m(B[mResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[39;25Hprint(results);[40;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[41;25H[34m// queries the SQL database for agents in the inputted city.[39m[42m [42;25H[49m(B[mresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[43;25Hprint(results);[44;69H(B[0;7m[ Read 321 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d[31mcatch[39m(B[m(SQLException e) {[25;25He.printStackTrace();[26;17H}[27;9H}[28d[32mvoid[39m(B[m addClient(){[29;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[30;17H[34m//get all info from user[31;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[32;17HString cName;[33;17HString cCity;[34;17HString cZip;[35;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[36;17HcName = scan.nextLine();[37;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[38;17HcCity = scan.nextLine();[39;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[40;17HcZip = scan.nextLine();[41;17H[31mtry[39m(B[m {[42;25H[34m//connect to db[43;25H[39m(B[mstatement = connection.createStatement();[23d[24d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[24;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[25;25Hresult.first();[26;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[27;25H[34m//purchase from agent if everything entered correctly[28;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[29;33H[34m//add to db[39m[42m [30;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[31;33Hstatement.executeUpdate(query);[32;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[33;25H} [31melse[39m(B[m {[34dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [35;25H[49m(B[m}[36;17H}[37d[31mcatch[39m(B[m(SQLException e) {[38;25He.printStackTrace();[39;17H}[41;9H}[42d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[43;17H[34m//get user unput[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[3;44r8[44d[21S[1;46r[23;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[24;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[25;17HString pType = scan.nextLine();[26;17H[31mtry[39m(B[m {[27;25H[34m//check if policy type exists[28;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[29;25H[31mif[39m(B[m(result.next()){[30;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[31;33H[31mif[39m(B[m(aCity.next()){[32;41H[34m//show all agents un client's city[33;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[34;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[35;41Hprint(result);[36;41H[34m//show all policies of type client is looking for[39m[42m [37;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[38;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[39;41Hprint(result);[40;41H[34m//get agent id that user wants to purchase from[41;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[42;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [43;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE (A_ID="[39m(B[m + aID  + [31m" AND A_CITY ='"[39m(B[m+ city + [31m"');"[39m(B[m);[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[3;44r8[44d[21S[1;46r[23;41H[34m//if agent id accepted[24;41H[31mif[39m(B[m(result.next()){[25;49H[34m//get policy id of policy client wants to purchase[26;49H[39m(B[mSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[27;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[28;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE (POLICY_ID ="[39m(B[m + pID + [31m" AND TYPE ='"[39m(B[m+pType + [31m"[39m(B[m$[29;49H[34m//if policy id accepted[30;49H[31mif[39m(B[m(result.next()){[42m      [31;57H[49m[34m//get amount of policy from client[32;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[33;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[34;57H[34m//firmat amount[39m[42m [35;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[36;57Hamount = Double.parseDouble(df.format(amount));[42m [37;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[38;57Hresult.first();[39;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[40;57H[34m//insert new row into Policies_sold table[41;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[42;57Hstatement.executeUpdate(query);[43;49H} [31melse[39m(B[m {[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[3;44r8[44d[21S[1;46r[23;57HSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[24;57H[31mreturn[39m(B[m 1;[25;49H}[26;41H}[27d[31melse[39m(B[m{[28dSystem.out.println([31m"That agent ID is not an option"[39m(B[m);[29;46H[31mreturn[39m(B[m 1;[30;41H}[31;33H} [31melse[39m(B[m {[32d[34m//no agent in clients city[39m[42m [33;41H[49m(B[mSystem.out.println([31m"There is not an agent in client's city"[39m(B[m);[34;41H[31mreturn[39m(B[m 1;[35;33H}[36;25H} [31melse[39m(B[m {[37d[34m//if policy type not found[38;33H[39m(B[mSystem.out.println([31m"Policy type not found"[39m(B[m);[39;33H[31mreturn[39m(B[m 1;[40;25H}[41;8H[42m[1K[42;17H[49m(B[m} [31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[23d[24d[25d[26d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[31mreturn[39m(B[m 1;[24;17H}[25d<<<<<<< HEAD[26;17H[31mreturn[39m(B[m 2;[27;9H}[42m       [28d[49m(B[m=======[29d }[30d[34m// Function that implements option 3, lists all policies sold by a particular agent.[39m[42m    [31d[49m(B[m>>>>>>> a8ee29d7658c48261960ac0eebb6af5e9410c23e[32;9H[32mvoid[39m(B[m policiesSold() {[33;17HSystem.out.println([31m"Option 3: List all policies sold by a particular agent"[39m(B[m);[34;17H[34m//get agent name and city from user[35;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[36;17HSystem.out.println([31m"Please Provide the agent's name"[39m(B[m);[37;17HString A_NAME = scan.nextLine();[38;17HSystem.out.println([31m"Please provide the city the agent is in"[39m(B[m);[39;17HString city = scan.nextLine();[40;17H[31mtry[39m(B[m {[41;25H[34m//connect to db[39m[42m [42;25H[49m(B[mstatement = connection.createStatement();[43;25Hstatement.executeUpdate([31m"use cggschwe;"[39m(B[m);[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[A[A[A[A[A[A[A[A[A[A[A>>>>>>> a8ee29d7658c48261960ac0eebb6af5e9410c23e[1;146H(B[0;7mModified[31;48H(B[m                                       [42m [49m(B[m[K       [K[31;44r[44;1H
[1;46r[43;25H[34m//Find agent[30;97H[39m(B[m[29;10H[A      [K[28;44r[44;1H
[1;46r[43;25HResultSet a_id = statement.executeQuery([31m"Select A_ID FROM AGENTS WHERE A_NAME = '"[39m(B[m + A_NAME + [31m"' AND A_CITY = '"[39m(B[m + city + [31m"';"[39m(B[m);[27;17H[A[A   [42m [49m(B[m[K       [K[25;44r[44;1H
[1;46r[43;25H[34m//if agent found[24;18H[39m(B[m[25d[26d[27;10H[28;18H[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d [41d[42d[43d7[3;44r8[44d[21S[1;46r[23;25H[31mif[39m(B[m(a_id.next()){[24;33H[32mint[39m(B[m A_ID = a_id.getInt(1);[25;33H[34m//get all policies sold by that agent[26;33H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT NAME, TYPE, COMMISION_PERCENTAGE FROM POLICY NATURAL JOIN POLICIES_SOLD [39m(B[m$[27;33Hprint(result);[28;25H[34m//agent not found[29;25H[39m(B[m}[31melse[39m(B[m {[30d System.out.println([31m"Either that Agent doesn't exist, or they are not in the city provided"[39m(B[m);[31;25H}[32;17H} [31mcatch[39m(B[m(SQLException e) {[33;25He.printStackTrace();[34;17H}[42m [35;9H[49m(B[m}[36d[34m// Function that implements option 4, cancels a policy.[39m[42m [37;9H[49m[32mvoid[39m(B[m cancelPolicy() {[38;17HSystem.out.println([31m"Option 4: cancel a policy."[39m(B[m);[39;17H[31mtry[39m(B[m {[40;25Hstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"use cggschwe;"[39m(B[m);[42;25HSystem.out.println([31m"Policies sold:"[39m(B[m);[43;25HResultSet result = statement.executeQuery([31m"SELECT * FROM POLICIES_SOLD;"[39m(B[m);[23;17H[24d[26d[27d[28d[29d[30d[31d[32d}[33d[34d}[35;10H[36;18H[37d[38d[39d[40d[41d[42d[43d7[3;44r8[44d[21S[1;46r[23;25Hprint(result);[24;25H[34m// inputs the purchase_id of the policy to cancel.[39m[42m [25;25H[49m(B[mSystem.out.println([31m"Enter the PURCHASE_ID of the policy to cancel: "[39m(B[m);[26;25HScanner scan = [32mnew[39m(B[m Scanner(System.in);[27;25HString id = scan.nextLine();[28;25H[34m// delete policy from SQL table.[29;25H[39m(B[mstatement.executeUpdate([31m"DELETE FROM POLICIES_SOLD WHERE PURCHASE_ID = "[39m(B[m + id + [31m";"[39m(B[m);[30;25Hresult = statement.executeQuery([31m"SELECT * FROM POLICIES_SOLD;"[39m(B[m);[31;25HSystem.out.println([31m"Updated POLICIES_SOLD table"[39m(B[m);[32;25Hprint(result);[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[37;9H}[38d[34m// Function that implements option 5, adds a new agent for a city.[39m[42m [39;9H[49m[32mvoid[39m(B[m addAgent() {[40;17HSystem.out.println([31m"Option 5: add a new agent for a city."[39m(B[m);[41;17HSystem.out.println([31m"What city are you adding an agent for? "[39m(B[m);[42;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[43;17H[34m// inputs the agent's information that the user wishes to add to the SQL database.[39m[42m [23;17H[49m(B[m[25d[26d[27d[28d[29d[30d[31d[32d[33d}[34d[35d[36d}[37;10H[38;18H[39d[40d[41d[42d[43d7[3;44r8[44d[21S[1;46r[23;17HString city = scan.nextLine();[24;17HSystem.out.print([31m"What is the agent's id (A_ID starts with 2)? "[39m(B[m);[25;17HString a_id = scan.next();[26;17HSystem.out.print([31m"What is the agent's name (A_NAME)? "[39m(B[m);[27;17HString a_name = scan.next();[28;17HSystem.out.print([31m"What is the agent's city (A_CITY)? "[39m(B[m);[29;17HString a_city = scan.next();[30;17HSystem.out.print([31m"What is the agent's zip (A_ZIP)? "[39m(B[m);[31;17HString a_zip = scan.next();[32;17H[31mtry[39m(B[m {[33;25H[34m// adds the inputted agent to the SQL table.[39m[42m [34;25H[49m(B[mstatement = connection.createStatement();[35;25Hstatement.executeUpdate([31m"use cggschwe;"[39m(B[m);[36;25Hstatement.executeUpdate([31m"INSERT INTO AGENTS VALUES ("[39m(B[m+a_id+[31m",'"[39m(B[m+a_name+[31m"','"[39m(B[m+a_city+[31m"',"[39m(B[m+a_zip+[31m");"[39m(B[m);[37;25HResultSet result = statement.executeQuery([31m"SELECT * FROM AGENTS;"[39m(B[m);[38;25HSystem.out.println([31m"Updated Agents table:"[39m(B[m);[39;25Hprint(result);[40;17H}[41d[31mcatch[39m(B[m(SQLException e){[42;25He.printStackTrace();[43;17H}[23;18H[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d}[41d[42d[43d}7[2;44r8[44d[21S[1;46r[2;1H[K[23;9H}[24d[32mvoid[39m(B[m quit() [36mthrows[39m(B[m SQLException {[25;17H[31mif[39m(B[m(statement != [33mnull[39m(B[m && connection != [33mnull[39m(B[m) {[42m [26;17H[49m(B[mstatement.close();[27;17Hconnection.close();[28;17HSystem.out.println([31m"Database successfully closed. See ya."[39m(B[m);[29;17H}[30d[31melse[39m(B[m {[31d  System.out.println([31m"Your connection has not been opened yet. Sorry to see you leave so soon :'("[39m(B[m);[32;17H}[33;9H}[34d[32mvoid[39m(B[m menu(){[35;17H[32mboolean[39m(B[m quit = [33mfalse[39m(B[m;[36;17HSystem.out.println([31m"Select and option from the menu below"[39m(B[m);[37;17HSystem.out.println([31m"1) Find all agents and clients in a given city"[39m(B[m);[38;17HSystem.out.println([31m"2) Add a new client, then purchase an available policy from a particular client"[39m(B[m);[39;17HSystem.out.println([31m"3) List all policies sold by a particular agent"[39m(B[m);[40;17HSystem.out.println([31m"4) Cancel  a policy"[39m(B[m);[41;17HSystem.out.println([31m"5) Add a new agent"[39m(B[m);[42;17HSystem.out.println([31m"6) Quit"[39m(B[m);[43;17HScanner scanner = [32mnew[39m(B[m Scanner(System.in);[23;10H[24;18H[26d[27d[28d[29d[30d[31d[32d}[33;10H[34;18H[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17HString userInput = [31m""[39m(B[m;[24;17H[31mwhile[39m(B[m(!quit){[25;25HuserInput = scanner.nextLine();[26;25H[31mswitch[39m(B[m(userInput){[27;33H[31mcase[39m(B[m [31m"1"[39m(B[m: findAandC();[28;43H[31mbreak[39m(B[m;[29;33H[31mcase[39m(B[m [31m"2"[39m(B[m: addClient();[30;43H[31mbreak[39m(B[m;[31;33H[31mcase[39m(B[m [31m"3"[39m(B[m: policiesSold();[32;43H[31mbreak[39m(B[m;[33;33H[31mcase[39m(B[m [31m"4"[39m(B[m: cancelPolicy();[34;43H[31mbreak[39m(B[m;[35;33H[31mcase[39m(B[m [31m"5"[39m(B[m: addAgent();[36;43H[31mbreak[39m(B[m;[37;33H[31mcase[39m(B[m [31m"6"[39m(B[m:[42m [38d[49m(B[mquit = [33mtrue[39m(B[m;[39;43H[31mtry[39m(B[m {[40;51Hquit();[41;43H} [31mcatch[39m(B[m(SQLException e) {[42;51He.printStackTrace();[43;43H}[23;18H[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;43H[31mbreak[39m(B[m;[24;33H[31mdefault[39m(B[m: System.out.println([31m"That is not an accepted option, plese refere to the menu"[39m(B[m);[42m [25;25H[49m(B[m}[26;17H}[42m[15X[27;9H[49m(B[m}[28d[36mpublic[39m(B[m [32mvoid[39m(B[m print(ResultSet resultSet) [36mthrows[39m(B[m SQLException {[29;9HResultSetMetaData metaData = resultSet.getMetaData();[30;9H[32mint[39m(B[m numColumns = metaData.getColumnCount();[32;9HprintRecords(resultSet, numColumns);[33;5H}[34d[34m// Print the attribute names[35;5H[36mpublic[39m(B[m [32mvoid[39m(B[m printHeader(ResultSetMetaData metaData, [32mint[39m(B[m numColumns) [36mthrows[39m(B[m SQLException {[36;9H[31mfor[39m(B[m ([32mint[39m(B[m i = 1; i <= numColumns; i++) {[37;13H[31mif[39m(B[m (i > 1)[38;17HSystem.out.print([31m",  "[39m(B[m);[39;13HSystem.out.print(metaData.getColumnName(i));[40;9H}[41dSystem.out.println();[42;5H}[23;17H[24d[25d[26d}[27;10H[28;18H[29d[30d[31d[32;18H[33;6H[34;18H[35d[36d[37d[38d[39d[40;10H[41;18H[42;6H[43d7[3;44r8[44d[21S[1;46r[23;5H[34m// Print the attribute values for all tuples in the result[24;5H[36mpublic[39m(B[m [32mvoid[39m(B[m printRecords(ResultSet resultSet, [32mint[39m(B[m numColumns) [36mthrows[39m(B[m SQLException {[25;9HString columnValue;[26;9H[31mwhile[39m(B[m (resultSet.next()) {[27;13H[31mfor[39m(B[m ([32mint[39m(B[m i = 1; i <= numColumns; i++) {[28;17H[31mif[39m(B[m (i > 1)[29;21HSystem.out.print([31m",  "[39m(B[m);[30;17HcolumnValue = resultSet.getString(i);[31;17HSystem.out.print(columnValue);[32;13H}[33dSystem.out.println([31m""[39m(B[m);[34;9H}[35;5H}[37;9H[36mpublic[39m(B[m [32mvoid[39m(B[m connect(String Username, String mysqlPassword) [36mthrows[39m(B[m Exception {[38;9H[31mtry[39m(B[m {[39;11HClass.forName([31m"com.mysql.jdbc.Driver"[39m(B[m);[42m       [40;11H[49m(B[mconnection = DriverManager.getConnection([31m"jdbc:mysql:[34m//localhost/" + Username + "?user=" + Username + "&password=" + mysqlPassword);[41;9H[39m(B[m}[42d[31mcatch[39m(B[m (Exception e) {[43;13HSystem.out.println([31m"error"[39m(B[m);[23;18H[24d[25d[26d[27d[A[A[A[A[A[21;6H[20;18H[19;10H[18;18H[A[A[A[A[A[12;6H[11;18H[A[9;18H[A[A[6;10H[5;18H[A[A[2;43r[2;1H[21T[1;46r[3;17H[31mwhile[39m(B[m(!quit){[4;25HuserInput = scanner.nextLine();[5;25H[31mswitch[39m(B[m(userInput){[6;33H[31mcase[39m(B[m [31m"1"[39m(B[m: findAandC();[7;43H[31mbreak[39m(B[m;[8;33H[31mcase[39m(B[m [31m"2"[39m(B[m: addClient();[9;43H[31mbreak[39m(B[m;[10;33H[31mcase[39m(B[m [31m"3"[39m(B[m: policiesSold();[11;43H[31mbreak[39m(B[m;[12;33H[31mcase[39m(B[m [31m"4"[39m(B[m: cancelPolicy();[13;43H[31mbreak[39m(B[m;[14;33H[31mcase[39m(B[m [31m"5"[39m(B[m: addAgent();[15;43H[31mbreak[39m(B[m;[16;33H[31mcase[39m(B[m [31m"6"[39m(B[m:[42m [17d[49m(B[mquit = [33mtrue[39m(B[m;[18;43H[31mtry[39m(B[m {[19;51Hquit();[20;43H} [31mcatch[39m(B[m(SQLException e) {[21;51He.printStackTrace();[22;43H}[23d[31mbreak[39m(B[m;[23;17H[21d[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[C[2;43r[2;1H[21T[1;46r[3;9H[32mvoid[39m(B[m quit() [36mthrows[39m(B[m SQLException {[4;17H[31mif[39m(B[m(statement != [33mnull[39m(B[m && connection != [33mnull[39m(B[m) {[42m [5;17H[49m(B[mstatement.close();[6;17Hconnection.close();[7;17HSystem.out.println([31m"Database successfully closed. See ya."[39m(B[m);[8;17H}[9d[31melse[39m(B[m {[10d  System.out.println([31m"Your connection has not been opened yet. Sorry to see you leave so soon :'("[39m(B[m);[11;17H}[12;9H}[13d[32mvoid[39m(B[m menu(){[14;17H[32mboolean[39m(B[m quit = [33mfalse[39m(B[m;[15;17HSystem.out.println([31m"Select and option from the menu below"[39m(B[m);[16;17HSystem.out.println([31m"1) Find all agents and clients in a given city"[39m(B[m);[17;17HSystem.out.println([31m"2) Add a new client, then purchase an available policy from a particular client"[39m(B[m);[18;17HSystem.out.println([31m"3) List all policies sold by a particular agent"[39m(B[m);[19;17HSystem.out.println([31m"4) Cancel  a policy"[39m(B[m);[20;17HSystem.out.println([31m"5) Add a new agent"[39m(B[m);[21;17HSystem.out.println([31m"6) Quit"[39m(B[m);[22;17HScanner scanner = [32mnew[39m(B[m Scanner(System.in);[23;17HString userInput = [31m""[39m(B[m;[23;18H[21d[A[A[A[A[A[A[A[A[12;10H7[13;43r8[13dM[1;46r[13;1H``\  [K[8G[42m[1K [49m(B[m[16G[42m[1K [49m(B[m[13;9H[K[1K /[34m//[39m(B[m[34ma[39m(B[m[34ml[39m(B[m[34ml[39m(B[m[42m [49m(B[m[34m o[39m(B[m[34mp[39m(B[m[34mt[39m(B[m[34mi[39m(B[m[34mo[39m(B[m[34mn[39m(B[m[34ms[39m(B[m[42m [49m(B[m[34m t[39m(B[m[34mh[39m(B[m[34me[39m(B[m[42m [49m(B[m[34m u[39m(B[m[34ms[39m(B[m[34me[39m(B[m[34mr[39m(B[m[42m [49m(B[m[34m c[39m(B[m[34ma[39m(B[m[34mn[39m(B[m[42m [49m(B[m[34m u[39m(B[m[34ms[39m(B[m[34me[39m(B[m  [42m [49m(B[m[K [42m [49m(B[m[34m s[39m(B[m[34me[39m(B[m[34ml[39m(B[m[34me[39m(B[m[34mc[39m(B[m[34mt[39m(B[m[42m [49m(B[m [34m.[39m(B[m[42m [49m(B[m[34m t[39m(B[m[34ma[39m(B[m[34mk[39m(B[m[34me[39m(B[m[34ms[39m(B[m[42m [49m(B[m[34m i[39m(B[m[34mn[39m(B[m[42m [49m(B[m[34m k[39m(B[m[34me[39m(B[m[34my[39m(B[m[34mb[39m(B[m[34mo[39m(B[m[34ma[39m(B[m[34mr[39m(B[m[34md[39m(B[m[42m [49m(B[m        [42m [49m(B[m[K [42m [49m(B[m[34m f[39m(B[m[34mr[39m(B[m[34mo[39m(B[m[34mm[39m(B[m[42m [49m(B[m[34m k[39m(B[m[34me[39m(B[m[34my[39m(B[m[34mb[39m(B[m[34mo[39m(B[m[34ma[39m(B[m[34mr[39m(B[m[34md[39m(B[m[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Ap