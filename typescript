Script started on Tue 31 Mar 2020 02:18:15 PM CDT
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ exitjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
1
Option 1: Find all agents and clients in a given city.
What city would you like to search? atlam nta
We will search for agents and clients in atlanta.
Clients in atlanta:
Agents in atlanta:
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
landon
Enter client's city
atlanta
Enter clientâ€™s zip
3126
What type of policy would you like to purchase?
life
There is not an agent in client's city
Client could not be added to the db
5
Option 5: add a new agent for a city.
What city are you adding an agent for? 
atlamn  nta
What is the agent's id (A_ID starts with 2)? 207
What is the agent's name (A_NAME)? samantha
What is the agent's city (A_CITY)? atlanta
What is the agent's zip (A_ZIP)? 3126
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '207' for key 'PRIMARY'
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:935)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.StatementImpl.executeUpdateInternal(StatementImpl.java:1540)
	at com.mysql.jdbc.StatementImpl.executeLargeUpdate(StatementImpl.java:2595)
	at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1468)
	at HW4.addAgent(HW4.java:211)
	at HW4.menu(HW4.java:252)
	at HW4.main(HW4.java:20)
5
Option 5: add a new agent for a city.
What city are you adding an agent for? 
ATLAM NTA
What is the agent's id (A_ID starts with 2)? 221
What is the agent's name (A_NAME)? SAMANTHA
What is the agent's city (A_CITY)? ATLANTA
What is the agent's zip (A_ZIP)? 3126
Updated Agents table:
201,  ANDREW,  DALLAS,  43214
202,  PHILIP,  PHOENIX,  85011
203,  JERRY,  BOSTON,  83125
204,  BRYAN,  ROGERS,  78291
205,  TOMMY,  DALLAS,  43214
206,  BRANT,  FAYETTEVILLE,  72701
207,  SMITH,  ROGERS,  78291
221,  SAMANTHA,  ATLANTA,  3126
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
LANDON
Enter client's city
ATLANTA
Enter clientâ€™s zip
3126
What type of policy would you like to purchase?
CAR
Policy type not found
Client could not be added to the db
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
LANDON
Enter client's city
ATLANTA
Enter clientâ€™s zip
3126
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in ATLANTA
221,  SAMANTHA,  ATLANTA,  3126
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
220
That agent ID is not an option
Client could not be added to the db
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
LANDON
Enter client's city
ATLANTA
Enter clientâ€™s zip
32 126
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in ATLANTA
221,  SAMANTHA,  ATLANTA,  3126
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
221
Provide the policy id you want to purchase
30 20
That policy ID is not an option
Client could not be added to the db
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
LANDON
Enter client's city
ATLANTA
Enter clientâ€™s zip
3126
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in ATLANTA
221,  SAMANTHA,  ATLANTA,  3126
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
221
Provide the policy id you want to purchase
302
Please provide the amount of the policy
4500
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`cggschwe`.`POLICIES_SOLD`, CONSTRAINT `POLICIES_SOLD_ibfk_2` FOREIGN KEY (`CLIENT_ID`) REFERENCES `CLIENTS` (`C_ID`))
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:935)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.StatementImpl.executeUpdateInternal(StatementImpl.java:1540)
	at com.mysql.jdbc.StatementImpl.executeLargeUpdate(StatementImpl.java:2595)
	at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1468)
	at HW4.purchase(HW4.java:121)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:246)
	at HW4.main(HW4.java:20)
We will add LANDON to our database as a client
1
Option 1: Find all agents and clients in a given city.
What city would you like to search? ATLANTA
We will search for agents and clients in ATLANTA.
Clients in ATLANTA:
107,  LANDON,  ATLANTA,  3126
Agents in ATLANTA:
221,  SAMANTHA,  ATLANTA,  3126
3 4
Option 4: cancel a policy.
Policies sold:
401,  204,  106,  303,  2020-01-02,  2000.00
402,  201,  105,  305,  2019-08-11,  1500.00
403,  203,  106,  301,  2019-09-08,  3000.00
404,  207,  101,  305,  2019-06-21,  1500.00
405,  203,  104,  302,  2019-11-14,  4500.00
407,  205,  103,  304,  2020-10-15,  5000.00
408,  204,  103,  304,  2020-02-15,  5000.00
410,  202,  103,  303,  2020-01-30,  2000.00
Enter the PURCHASE_ID of the policy to cancel: 
6
Updated POLICIES_SOLD table
401,  204,  106,  303,  2020-01-02,  2000.00
402,  201,  105,  305,  2019-08-11,  1500.00
403,  203,  106,  301,  2019-09-08,  3000.00
404,  207,  101,  305,  2019-06-21,  1500.00
405,  203,  104,  302,  2019-11-14,  4500.00
407,  205,  103,  304,  2020-10-15,  5000.00
408,  204,  103,  304,  2020-02-15,  5000.00
410,  202,  103,  303,  2020-01-30,  2000.00
EXIT
That is not an accepted option, plese refere to the menu
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ EXIT
EXIT: command not found
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ :ANO [K[K[K[K[Knano HW4.java
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 306 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[2;44r[44;1H[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m";"[39m(B[m);[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23d[24d[25d[26d[27d[A[A[A[A[A[A[A[20;9H[20;17H[20;25H[20;33H[20;41H[C[C[C[C[C[C[C[C[21d[A[A[A[19d statement.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1;146H(B[0;7mModified[19;95H(B[0m[31mnWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;96H[31maWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;97H[31mtWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;98H[31muWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;99H[31mrWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;100H[31maWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;101H[31mlWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;102H[1P[1P[1P[1P[1P[1P[1P[31mNWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;96H[31mAWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;97H[31mTWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;98H[31mUWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;99H[31mRWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;100H[31mAWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;101H[31mLWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;102H[31m WHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;103H[31mJWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;104H[31mOWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;105H[31mIWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;106H[31mNWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;107H[31m WHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;108H[31mpWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;109H[31mOWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;110H[31mLWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;111H[31mIWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;112H[31mCWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;113H[31mYWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;114H[1P[1P[1P[1P[1P[1P[31mPWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;109H[31mOWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;110H[31mLWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;111H[31mIWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;112H[31mCWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;113H[31mYWHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;114H[31m WHERE A_ID="[39m(B[m + aID  + [31m";"[39m(B[m);[19;115H[C[C[C[C[C[C[C[C[C[C[C[C + aID  + [C[31mA;"[39m(B[m);[31mN;"[39m(B[m);[31mD;"[39m(B[m);[31m ;"[39m(B[m);[31m;"[39m(B[m);[K[31m ;"[39m(B[m);[31mC;"[39m(B[m);[31mI;"[39m(B[m);[31mT;"[39m(B[m);[31mY;"[39m(B[m);[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31ma;"[39m(B[m);[31m;"[39m(B[m);[K[31mA;"[39m(B[m);[31m_;"[39m(B[m);[31mC;"[39m(B[m);[31mI;"[39m(B[m);[31mT;"[39m(B[m);[31mY;"[39m(B[m);[31m ;"[39m(B[m);[31m=;"[39m(B[m);[31m ;"[39m(B[m);[31m;"[39m(B[m);[K[31m"[39m(B[m;");[31m'"[39m(B[m;");[19;151H[C+;"$[19;153H ;$[31m='"[39m(B[m+ C;");[KI;");T;");Y;");;");[K;");[K;");[K[19;40H[1K result = statement.executeQuery([31m"SELECT * FROM AGENTS NATURAL JOIN POLICY WHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ ;$[19;154H$[31m='"[39m(B[m+ c;");[Ki;");t;");y;"); ;");+;"); ;");[31m";"[39m(B[m);[19;40H[1K result = statement.executeQuery([31m"SELECT * FROM AGENTS NATURAL JOIN POLICY WHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ c$[19;154H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ ci[19;114H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ cit[19;113H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city[19;112H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city [19;111H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city +[19;110H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [19;109H[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m"[19;108H[39m(B[m[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m";[19;107H[39m(B[m[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m";"[19;106H[39m(B[m[31mWHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[19;105H[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[20;63H[21;59H[22;95H[23d[24d[25;95H[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + pID + [C[31m ;"[39m(B[m);[31ma;"[39m(B[m);[31mn;"[39m(B[m);[31md;"[39m(B[m);[31m ;"[39m(B[m);[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31m;"[39m(B[m);[K[31mA;"[39m(B[m);[31mN;"[39m(B[m);[31mD;"[39m(B[m);[31m ;"[39m(B[m);[31mT;"[39m(B[m);[31mY;"[39m(B[m);[31mP;"[39m(B[m);[31mE;"[39m(B[m);[31m ;"[39m(B[m);[31m=;"[39m(B[m);[31m ;"[39m(B[m);[31m;"[39m(B[m);[K[31m';"[39m(B[m);[31m"[39m(B[m;");+;");[31m";"[39m(B[m);P[31m";"[39m(B[m);[146Gt[31m";"[39m(B[m);[147GY[31m";"[39m(B[m);[148GP[31m";"[39m(B[m);[149GE[31m";"[39m(B[m);[150G[31m";"[39m(B[m);[K[149G[31m";"[39m(B[m);[K[148G[31m";"[39m(B[m);[K[147G[31m";"[39m(B[m);[K[146G[31m";"[39m(B[m);[K[145Gp[31m";"[39m(B[m);[146GT[31m";"[39m(B[m);[147Gy[31m";"[39m(B[m);[148Gp[31m";"[39m(B[m);[149Ge[31m";"[39m(B[m);[150G [31m";"[39m(B[m);[25;151H+[31m";"[39m(B[m$[25;152H [31m";[39m(B[m[26;72H[27;73H[28;91H[29;119H[30;109H[31;73H[32;102H[33;105H[34;136H[35;72H[36;93H[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 306 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[36;93H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javaEXIT[Kjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cexit[Kjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cnano HW4.java[K[7Pscriptjavac HW4.java[1Pnano[C[C[C[C[C[C[C[C[C[1@javac[C[C[C[C[C[C[C[C[C
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[CEXIT[Kjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cexit[Kjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian 
Enter client's city
Fayetteville
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
life
Policy type found. Here are the agents in Fayetteville
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
205
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'A_CITY ='Fayetteville' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:101)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:246)
	at HW4.main(HW4.java:20)
We will add Gillian  to our database as a client
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian
Enter client's city
Fayetteville
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
life
Policy type found. Here are the agents in Fayetteville
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
6
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'A_CITY ='Fayetteville' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:101)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:246)
	at HW4.main(HW4.java:20)
We will add Gillian to our database as a client
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ java -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 306 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[40;9H[40;17H[40;25H[40;33H[40;41Hresult = s[41d[C[C[C[C[C[C[C[C[C[C[C[C[42d[42;9H[42;17H[42;25H[42;33H[42;41H[C[C(result.next())[A[A[A[A[A[A[Amen[A[A[A[Amen[A[31d[32;55H[33;58H[34d[35d[36;55H[37;58H[38d[39d[40dt.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + aID  + [C[C[C[C[C[C[C[C[C[C[1;146H(B[0;7mModified[40;121H(B[0m[31m  A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;122H[31mw A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;123H[31mh A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;124H[31me A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;125H[31mr A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;126H[1P[1P[1P[1P[31mW A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;123H[31mH A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;124H[31mE A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;125H[31mR A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;126H[31mE A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[40;127H[41;63H[42;59H[43;99H7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND TYPE ='"[39m(B[m+pType + [31m";[39m(B[m$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23;114H[24;93H[25;127H[26;72H[27;73H[28;91H[27;73H[A[25;127H[24;93H[25d[25;9H[25;17H[25;25H[25;33H[25;41H[25;49Hresult = statement.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + pID + [C[C[C[C[C[C[31mWTYPE ='"[39m(B[m+pType + [31m"[25;137H[39m(B[m[31mHTYPE ='"[39m(B[m+pType + [25;138H[31mETYPE ='"[39m(B[m+pType +[25;139H[31mRTYPE ='"[39m(B[m+pType [25;140H[31mETYPE ='"[39m(B[m+pType[25;141H[31m TYPE ='"[39m(B[m+pTyp[25;142H[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 306 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[25;142H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C[1@javac[C[C[C[C[C[C[C[C[C
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cnano HW4.java[K
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 306 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_ID="[39m(B[m + aID  + [31m"AND WHERE A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;41H}[24d[31melse[39m(B[m{[25dSystem.out.println([31m"That agent ID is not an option"[39m(B[m);[26;46H[31mreturn[39m(B[m 1;[27;41H}[28;33H} [31melse[39m(B[m {[29d[34m//no agent in clients city[39m[42m [30;41H[49m(B[mSystem.out.println([31m"There is not an agent in client's city"[39m(B[m);[31;41H[31mreturn[39m(B[m 1;[32;33H}[33;25H} [31melse[39m(B[m {[34d[34m//if policy type not found[35;33H[39m(B[mSystem.out.println([31m"Policy type not found"[39m(B[m);[36;33H[31mreturn[39m(B[m 1;[37;25H}[38;8H[42m[1K[39;17H[49m(B[m} [31mcatch[39m(B[m(SQLException e) {[40;25He.printStackTrace();[41;17H}[42d[31mreturn[39m(B[m 2;[43;9H}[42m       [23d[49m(B[m[24d[25d[26d[27d[28d[29d[30d[30;9H[30;17H[30;25H[30;33H[30;41HSyst[31d[32;34H[33d[34;45H[35d[36;42H[37;26H[38;9H[39;42H[40;45H[41d[40;45H[1;146H(B[0;7mModified[41d(B[m[K[42;17H}[K[43d[1K [31mreturn[39m(B[m 2;[41d[8G[42m[1K [49m(B[m[16G[42m[1K [49m(B[m[24G[42m[1K [49m(B[m[1K RETURN     [42m[1K [49m(B[m [1K retur[25G[31mreturn[39m(B[m[42m [49m(B[m 1;[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[41;34H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.java[1@javac[C[C[C[C[C[C[C[C[C
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[C[1@javac[C[C[C[C[C[C[C[C[C[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian
Enter client's city
Fayetteviile
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
life
There is not an agent in client's city
Client could not be added to the db
201
That is not an accepted option, plese refere to the menu
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian
Enter client's city
Fayetteville
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
life
Policy type found. Here are the agents in Fayetteville
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
201
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE A_CITY ='Fayetteville' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:101)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:247)
	at HW4.main(HW4.java:20)
Client could not be added to the db
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ java -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 307 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_ID="[39m(B[m + aID  + [31m"AND WHERE A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[A[17d[18d[19d[20d[19;152H[20;63H[A[Age[19dnt.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1;146H(B[0;7mModified[19;101H(B[0m[31m(A_ID="[39m(B[m + aID  + [31m"AND WHERE A_CITY ='"[39m(B[m+ city + [31m";"[39m(B[m);[19;102H[C[C[C[C[C[C + aID  + [C[C[C[C[C[C[C[C[C[C[C[1P[1P[1P[1P[1P[1P[C[C[C[C[C[C[C[C[C[C+ city + )[31m";"[39m(B[m);[143G[31m";"[39m(B[m);[K[142G[C[31m);"[39m(B[m);[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[19;144H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian
Enter client's city
Fayetteville
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
life
Policy type found. Here are the agents in Fayetteville
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
201
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'A_CITY ='Fayetteville)' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:101)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:247)
	at HW4.main(HW4.java:20)
Client could not be added to the db
^[[A    6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ java -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 307 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE (A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m");"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[38;9H[39d[40d[41d[42d[43d[43;17H[43;25H[43;33H[43;41H[43;49H[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[42;59H[41;63H[42d[42;9H[42;17H[42;25H[A[A[40;33H[40;41Hresult = statement.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + aID  + [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C+ city + [C[1;146H(B[0;7mModified[40;143H(B[0m[31m');"[39m(B[m);[144G[41;63H[42;59H[43;99H7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23;114H[22;99H[23;114H[24;93H[25;144H[C[C[C[C[C[C[C[C[C[C[C[C+pTy$[31m"[39m(B[m+pType + [31m";"[39m(B[m);[K[8Ge + [C[31m';"[39m(B[m);[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[25;14H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
Gillian
Enter client's city
G FAYETTEVILLE
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in FAYETTEVILLE
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
201
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'A_CITY ='FAYETTEVILLE')' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:101)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:247)
	at HW4.main(HW4.java:20)
Client could not be added to the db
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ java -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 307 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE (A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m"');"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[25d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23d[24d[26d[27d[A[A[A[A[A[A[A[A[A[18;9H[18;17H[18;25H[18;33H[18;41H[C[C[C aID = Integer.parseInt(scan.nextLine());[C[19d[19;9H[19;17H[19;25H[19;33H[19;41Hresult[19;33H[19;25H[19;17H[19;9H[18;86H[C[19d[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + aID  + [44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[44;68H[39;49m(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[19;118H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cnano HW4.java[K
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 307 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE (A_ID="[39m(B[m + aID  + [31m"AND A_CITY ='"[39m(B[m+ city + [31m"');"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[25d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[38;9H[38;17H[38;25H[38;33H[38;41HSystem[39d[40d = statement.executeQuery([C[C[C[C[C[C[81G[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C + aID  + [C[1;146H(B[0;7mModified[40;119H(B[0m[31m AND A_CITY ='"[39m(B[m+ city + [31m"');"[39m(B[m);[40;120H[41;63H[42;59H[43;99H7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23;114H[24;93H[25;120H[26;72H[27;73H[28;91H[29;119H[30;109H[31;73H[32;102H[33;105H[34;120H[35;72H[34;120H[33;105H[A[31;73H[30;109H[29;119H[28;91H[27;73H[A[25;120H[24;93H[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[24;93H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C[C[C[C[C[C[C[Cjava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K -cp .:mysql-connector-java-5.1.40-bin.jar HW4
Select and option from the menu below
1) Find all agents and clients in a given city
2) Add a new client, then purchase an available policy from a particular client
3) List all policies sold by a particular agent
4) Cancel  a policy
5) Add a new agent
6) Quit
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
gillian       GILLIAN
Enter client's city
FAYETTEVILLE
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in FAYETTEVILLE
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
201
That agent ID is not an option
Client could not be added to the db
2
Option 2: Add a new client, then purchase an available policy from a particular agent.
Enter clientâ€™s name
GILLIAN
Enter client's city
FAYETTEVILLE
Enter clientâ€™s zip
72701
What type of policy would you like to purchase?
LIFE
Policy type found. Here are the agents in FAYETTEVILLE
206,  BRANT,  FAYETTEVILLE,  72701
These are all the available policies
302,  GOLD,  LIFE,  8
Provide the id of the Agent that you wish to purchase the policy from
206
Provide the policy id you want to purchase
301
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE TYPE ='LIFE'' at line 1
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3970)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3906)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2677)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2503)
	at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1369)
	at HW4.purchase(HW4.java:107)
	at HW4.addClient(HW4.java:65)
	at HW4.menu(HW4.java:247)
	at HW4.main(HW4.java:20)
Client could not be added to the db
6
Database successfully closed. See ya.
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ java -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K[1Pnano[C[C[C[C[C[C[C[C[C
[?1049h[1;46r(B[m[4l[?7h[?12l[?25h[?1h=[?1h=[?1h=[39;49m[39;49m(B[m[H[2J(B[0;7m  GNU nano 2.2.6                                       File: HW4.java                                                                                      [4;1H(B[0m[36mimport[39m(B[m java.sql.*;[5d[36mimport[39m(B[m java.util.Properties;[6d[36mimport[39m(B[m java.util.Scanner;[7d[36mimport[39m(B[m java.text.DecimalFormat;[8d[36mpublic[39m(B[m [36mclass[39m(B[m HW4 {[9;9H[36mprivate[39m(B[m Connection connection;[10;9H[36mprivate[39m(B[m Statement statement;[11;8H[42m[1K[12;9H[49m[36mpublic[39m(B[m HW4() {[13;17Hconnection = [33mnull[39m(B[m;[14;17Hstatement = [33mnull[39m(B[m;[15;9H}[17d[36mpublic[39m(B[m [36mstatic[39m(B[m [32mvoid[39m(B[m main(String[] args) [36mthrows[39m(B[m Exception{[18;17HString Username=[31m"cggschwe"[39m(B[m;[19;17HString Password=[31m"ARKANSAS2019!"[39m(B[m;[20;17HHW4 db = [32mnew[39m(B[m HW4();[21;17Hdb.connect(Username, Password);[22;17Hdb.menu();[23;9H}[26d[32mvoid[39m(B[m findAandC() {[27;17HSystem.out.println([31m"Option 1: Find all agents and clients in a given city."[39m(B[m);[28;17HSystem.out.print([31m"What city would you like to search? "[39m(B[m);[29;17HScanner scan = [32mnew[39m(B[m Scanner(System.in);[30;17HString city = scan.nextLine();[31;17HSystem.out.println([31m"We will search for agents and clients in "[39m(B[m + city + [31m"."[39m(B[m);[32;17H[31mtry[39m(B[m {[33;25Hstatement = connection.createStatement();[34;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[35;25HSystem.out.println([31m"Clients in "[39m(B[m + city + [31m":"[39m(B[m);[36;25HResultSet results = statement.executeQuery([31m"SELECT * FROM CLIENTS WHERE C_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[37;25Hprint(results);[38;25HSystem.out.println([31m"Agents in "[39m(B[m+ city + [31m":"[39m(B[m);[39;25Hresults = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY='"[39m(B[m+city+[31m"';"[39m(B[m);[40;25Hprint(results);[41;17H}[42d[31mcatch[39m(B[m(SQLException e) {[43;25He.printStackTrace();[44;69H(B[0;7m[ Read 307 lines ][45d^G(B[m Get Help[45;26H(B[0;7m^O(B[m WriteOut[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[45;126H(B[0;7m^C(B[m Cur Pos[46d(B[0;7m^X(B[m Exit[46;26H(B[0;7m^J(B[m Justify[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[3d[4d[5d[6d[7d[8d[9d[10d[11d[12d[13d[14d[15d[16d[17d[18d[19d[20d[21d[22d[23d[24d[25d[26d[27d[28d[44d[K[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H}[24d}[25;9H[32mvoid[39m(B[m addClient(){[26;17HSystem.out.println([31m"Option 2: Add a new client, then purchase an available policy from a particular agent."[39m(B[m);[27;17H[34m//get all info from user[28;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[29;17HString cName;[30;17HString cCity;[31;17HString cZip;[32;17HSystem.out.println([31m"Enter clientâ€™s name"[39m(B[m);[33;17HcName = scan.nextLine();[34;17HSystem.out.println([31m"Enter client's city"[39m(B[m);[35;17HcCity = scan.nextLine();[36;17HSystem.out.println([31m"Enter clientâ€™s zip"[39m(B[m);[37;17HcZip = scan.nextLine();[38;17H[31mtry[39m(B[m {[39;25H[34m//connect to db[40;25H[39m(B[mstatement = connection.createStatement();[41;25Hstatement.executeUpdate([31m"USE cggschwe;"[39m(B[m);[42;25HResultSet result = statement.executeQuery([31m"SELECT MAX(C_ID) FROM CLIENTS;"[39m(B[m);[43;25Hresult.first();[23d[24d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;25H[32mint[39m(B[m C_ID = result.getInt(1)+1;[24;25H[34m//purchase from agent if everything entered correctly[25;25H[31mif[39m(B[m(purchase(cCity, C_ID) == 2){[26;33H[34m//add to db[39m[42m [27;33H[49m(B[mString query = [31m"INSERT into CLIENTS values ("[39m(B[m+ C_ID + [31m",'"[39m(B[m + cName + [31m"','"[39m(B[m + cCity + [31m"',"[39m(B[m +  cZip +  [31m");"[39m(B[m ;[28;33Hstatement.executeUpdate(query);[29;33HSystem.out.println([31m"We will add "[39m(B[m+cName+[31m" to our database as a client"[39m(B[m);[30;25H} [31melse[39m(B[m {[31dSystem.out.println([31m"Client could not be added to the db"[39m(B[m);[42m [32;25H[49m(B[m}[33;17H}[34d[31mcatch[39m(B[m(SQLException e) {[35;25He.printStackTrace();[36;17H}[38;9H}[39d[32mint[39m(B[m purchase(String city, [32mint[39m(B[m cID) {[40;17H[34m//get user unput[41;17H[39m(B[mScanner scan = [32mnew[39m(B[m Scanner(System.in);[42;17HSystem.out.println([31m"What type of policy would you like to purchase?"[39m(B[m);[43;17HString pType = scan.nextLine();[23d[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;17H[31mtry[39m(B[m {[24;25H[34m//check if policy type exists[25;25H[39m(B[mResultSet result = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE = '"[39m(B[m + pType + [31m"';"[39m(B[m);[26;25H[31mif[39m(B[m(result.next()){[27;33HResultSet aCity = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY = '"[39m(B[m + city+ [31m"';"[39m(B[m);[28;33H[31mif[39m(B[m(aCity.next()){[29;41H[34m//show all agents un client's city[30;41H[39m(B[mSystem.out.println([31m"Policy type found. Here are the agents in "[39m(B[m + city);[31;41Hresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE A_CITY ='"[39m(B[m + city + [31m"';"[39m(B[m);[32;41Hprint(result);[33;41H[34m//show all policies of type client is looking for[39m[42m [34;41H[49m(B[mSystem.out.println([31m"These are all the available policies"[39m(B[m);[35;41Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE TYPE ='"[39m(B[m+pType+[31m"';"[39m(B[m);[36;41Hprint(result);[37;41H[34m//get agent id that user wants to purchase from[38;41H[39m(B[mSystem.out.println([31m"Provide the id of the Agent that you wish to purchase the policy from"[39m(B[m);[39;41H[32mint[39m(B[m aID = Integer.parseInt(scan.nextLine());[42m [40;41H[49m(B[mresult = statement.executeQuery([31m"SELECT * FROM AGENTS WHERE (A_ID="[39m(B[m + aID  + [31m" AND A_CITY ='"[39m(B[m+ city + [31m"');"[39m(B[m);[41;41H[34m//if agent id accepted[42;41H[31mif[39m(B[m(result.next()){[43;49H[34m//get policy id of policy client wants to purchase[23d[39m(B[m[24d[26d[27d[28d[29d[30d[31d[32d[33d[34d[35d[36d[37d[38d[39d[40d[41d[42d[43d7[2;44r8[44d[21S[1;46r[2;1H[K[23;49HSystem.out.println([31m"Provide the policy id you want to purchase"[39m(B[m);[24;49H[32mint[39m(B[m pID = Integer.parseInt(scan.nextLine());[25;49Hresult = statement.executeQuery([31m"SELECT * FROM POLICY WHERE POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTyp$[26;49H[34m//if policy id accepted[27;49H[31mif[39m(B[m(result.next()){[42m      [28;57H[49m[34m//get amount of policy from client[29;57H[39m(B[mSystem.out.println([31m"Please provide the amount of the policy"[39m(B[m);[30;57H[32mdouble[39m(B[m amount = Double.parseDouble(scan.nextLine());[31;57H[34m//firmat amount[39m[42m [32;57H[49m(B[mDecimalFormat df = [32mnew[39m(B[m DecimalFormat([31m"#.00"[39m(B[m);[33;57Hamount = Double.parseDouble(df.format(amount));[42m [34;57H[49m(B[mresult = statement.executeQuery([31m"SELECT MAX(PURCHASE_ID) FROM POLICIES_SOLD;"[39m(B[m);[35;57Hresult.first();[36;57H[32mint[39m(B[m purchaseID = result.getInt(1)+1;[37;57H[34m//insert new row into Policies_sold table[38;57H[39m(B[mString query = [31m"INSERT into POLICIES_SOLD values ("[39m(B[m+ purchaseID + [31m","[39m(B[m + aID+ [31m","[39m(B[m + cID + [31m","[39m(B[m +  pI$[39;57Hstatement.executeUpdate(query);[40;49H} [31melse[39m(B[m {[41dSystem.out.println([31m"That policy ID is not an option"[39m(B[m);[42;57H[31mreturn[39m(B[m 1;[43;49H}[23d[24d[26d[27d[28d[29d[30d[31d[32d[A[A[A[A[A[A[A[A[A[A[22;9H[23d[24d[25d[25;17H[25;25H[25;33H[25;41H[25;49Hresult = statement.executeQuery([C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1;146H(B[0;7mModified[25;109H(B[0m[31m(POLICY_ID ="[39m(B[m + pID + [31m" AND WHERE TYPE ='"[39m(B[m+pTy[25;110H[C[C[C[C[C[C[C[C[C[C[C[C + pID + [C[C[C[C[C[C[C[C[C[C[C[C[31mYPE ='"[39m(B[m+pTyp[25;143H[31mYPE ='"[39m(B[m+pType[25;142H[31mYPE ='"[39m(B[m+pType [25;141H[31mYPE ='"[39m(B[m+pType +[25;140H[31mYPE ='"[39m(B[m+pType + [25;139H[31mYPE ='"[39m(B[m+pType + [31m"[25;138H[39m(B[m[31mYPE ='"[39m(B[m+pType + [31m"'[25;137H[39m(B[m[31mTYPE ='"[39m(B[m+pType + [31m"[25;138H[39m(B[m[C[C[C[C[C[C[C+pType + $pe + [31m"';"[39m(B[m);[K[8G[C[31m);"[39m(B[m);[44d(B[0;7mFile Name to Write: HW4.java                                                                                                                               [45;26H(B[m             (B[0;7mM-D(B[m DOS Format          [45;76H (B[0;7mM-A(B[m Append [45;101H[14X[45;115H(B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[46;26H             (B[0;7mM-M(B[m Mac Format         [46;76H (B[0;7mM-P(B[m Prepend[K[44;29H[1;146H[39;49m(B[0;7m        [44;68H(B[m[1K (B[0;7m[ Wrote 307 lines ](B[m[K[45;26H(B[0;7m^O(B[m WriteOut[14X[45;51H(B[0;7m^R(B[m Read File[45;76H(B[0;7m^Y(B[m Prev Page[45;101H(B[0;7m^K(B[m Cut Text[14X[45;126H(B[0;7m^C(B[m Cur Pos[46;2H(B[0;7mX(B[m Exit  [46;26H(B[0;7m^J(B[m Justify[15X[46;51H(B[0;7m^W(B[m Where Is[46;76H(B[0;7m^V(B[m Next Page[46;101H(B[0;7m^U(B[m UnCut Text[46;126H(B[0;7m^T(B[m To Spell[25;10H[45d[J[46;155H[46;1H[?1049l[?1l>]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ nano HW4.javajava -cp .:mysql-connector-java-5.1.40-bin.jar HW4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cc HW4.java[K
]0;grdirkso@turing: ~/HW4grdirkso@turing:~/HW4$ javac HW4.java[1Pnano[C[C